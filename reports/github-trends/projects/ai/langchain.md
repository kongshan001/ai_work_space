# LangChain

> æœ€æµè¡Œçš„ LLM åº”ç”¨å¼€å‘æ¡†æ¶

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

- **GitHub**: https://github.com/langchain-ai/langchain
- **Stars**: 85k+
- **Forks**: 12k+
- **License**: MIT
- **è¯­è¨€**: Python, TypeScript/JavaScript
- **å‘å¸ƒæ—¥æœŸ**: 2022-10
- **ç»´æŠ¤çŠ¶æ€**: æ´»è·ƒå¼€å‘ä¸­

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

LangChain æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºä¸Šä¸‹æ–‡æ„ŸçŸ¥æ¨ç†åº”ç”¨çš„å¼€æºæ¡†æ¶ã€‚å®ƒæä¾›äº†æ¨¡å—åŒ–çš„ç»„ä»¶ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè½»æ¾æ„å»ºå¤æ‚çš„ AI åº”ç”¨ï¼ŒåŒ…æ‹¬èŠå¤©æœºå™¨äººã€æ™ºèƒ½ä½“ã€RAG ç³»ç»Ÿç­‰ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **æ¨¡å—åŒ–è®¾è®¡**ï¼šé“¾ï¼ˆChainsï¼‰ã€æ™ºèƒ½ä½“ï¼ˆAgentsï¼‰ã€è®°å¿†ï¼ˆMemoryï¼‰ã€å·¥å…·ï¼ˆToolsï¼‰
- **å¤š LLM æ”¯æŒ**ï¼šOpenAIã€Anthropicã€HuggingFaceã€Ollama ç­‰
- **ä¸°å¯Œçš„é›†æˆ**ï¼š50+ æ–‡æ¡£åŠ è½½å™¨ã€å‘é‡æ•°æ®åº“ã€å·¥å…·
- **ä¼ä¸šçº§ç‰¹æ€§**ï¼šç›‘æ§ã€æ—¥å¿—ã€éƒ¨ç½²æ”¯æŒ

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          åº”ç”¨å±‚                          â”‚
â”‚  (Chatbots, Agents, RAG Applications)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        LangChain æ ¸å¿ƒå±‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Chains   â”‚  â”‚ Agents   â”‚  â”‚Memoryâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         é›†æˆå±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚LLMs      â”‚  â”‚Vector DB â”‚  â”‚Tools â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. Chainsï¼ˆé“¾ï¼‰

å°†å¤šä¸ªç»„ä»¶ä¸²è”èµ·æ¥å½¢æˆå·¥ä½œæµã€‚

```python
from langchain.chains import LLMChain
from langchain.prompts import PromptTemplate

# åˆ›å»ºæç¤ºæ¨¡æ¿
prompt = PromptTemplate(
    input_variables=["product"],
    template="ä¸º {product} å†™ä¸€æ®µè¥é”€æ–‡æ¡ˆ"
)

# åˆ›å»ºé“¾
chain = LLMChain(llm=llm, prompt=prompt)

# è¿è¡Œ
result = chain.run("AI å†™ä½œåŠ©æ‰‹")
```

#### 2. Agentsï¼ˆæ™ºèƒ½ä½“ï¼‰

è®© LLM æ ¹æ®ç”¨æˆ·è¾“å…¥è‡ªä¸»å†³å®šä½¿ç”¨å“ªäº›å·¥å…·ã€‚

```python
from langchain.agents import Tool, AgentExecutor
from langchain.tools import DuckDuckGoSearchRun

# å®šä¹‰å·¥å…·
search = DuckDuckGoSearchRun()
tools = [
    Tool(
        name="Search",
        func=search.run,
        description="æœç´¢äº’è”ç½‘ä¿¡æ¯"
    )
]

# åˆ›å»ºæ™ºèƒ½ä½“
agent = initialize_agent(tools, llm, agent="zero-shot-react-description")

# è¿è¡Œ
agent.run("2026å¹´æœ€æ–°çš„AIè¶‹åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ")
```

#### 3. Memoryï¼ˆè®°å¿†ï¼‰

è®©åº”ç”¨è®°ä½å¯¹è¯å†å²ã€‚

```python
from langchain.memory import ConversationBufferMemory

memory = ConversationBufferMemory()
memory.save_context({"input": "ä½ å¥½"}, {"output": "ä½ å¥½ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„ï¼Ÿ"})
memory.load_memory_variables({})
```

---

## ğŸš€ æœ€ä½³å®è·µåœºæ™¯

### åœºæ™¯ 1ï¼šä¼ä¸šçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ

**é€‚ç”¨æƒ…å†µ**ï¼š
- ä¼ä¸šæœ‰å¤§é‡æ–‡æ¡£éœ€è¦æŸ¥è¯¢
- éœ€è¦å‡†ç¡®çš„ç­”æ¡ˆï¼Œé¿å…å¹»è§‰
- è¦æ±‚å¼•ç”¨æ¥æº

**å®æ–½æ­¥éª¤**ï¼š

1. **å®‰è£…ä¾èµ–**
```bash
pip install langchain openai chromadb
```

2. **åŠ è½½æ–‡æ¡£**
```python
from langchain.document_loaders import DirectoryLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter

loader = DirectoryLoader('./docs', glob="**/*.pdf")
documents = loader.load()

text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=1000,
    chunk_overlap=200
)
splits = text_splitter.split_documents(documents)
```

3. **åˆ›å»ºå‘é‡å­˜å‚¨**
```python
from langchain.vectorstores import Chroma
from langchain.embeddings import OpenAIEmbeddings

embedding = OpenAIEmbeddings()
vectordb = Chroma.from_documents(
    documents=splits,
    embedding=embedding,
    persist_directory="./chroma_db"
)
```

4. **æ„å»ºæ£€ç´¢é“¾**
```python
from langchain.chains import RetrievalQA
from langchain.chat_models import ChatOpenAI

llm = ChatOpenAI(model="gpt-4", temperature=0)
qa_chain = RetrievalQA.from_chain_type(
    llm=llm,
    chain_type="stuff",
    retriever=vectordb.as_retriever(search_kwargs={"k": 3}),
    return_source_documents=True
)
```

5. **æŸ¥è¯¢**
```python
query = "å…¬å¸çš„ä¼‘å‡æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ"
result = qa_chain({"query": query})

print(f"ç­”æ¡ˆ: {result['result']}")
print(f"æ¥æº: {result['source_documents']}")
```

**ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼š
- ä½¿ç”¨æ›´å¿«çš„å‘é‡æ•°æ®åº“ï¼ˆå¦‚ Pineconeã€Qdrantï¼‰
- æ·»åŠ ç¼“å­˜å±‚å‡å°‘ API è°ƒç”¨
- å®æ–½é‡è¯•æœºåˆ¶å¤„ç†å¤±è´¥
- æ·»åŠ æ—¥å¿—å’Œç›‘æ§

---

### åœºæ™¯ 2ï¼šAI æ™ºèƒ½å®¢æœ

**é€‚ç”¨æƒ…å†µ**ï¼š
- éœ€è¦å¤„ç†å¤§é‡ç”¨æˆ·å’¨è¯¢
- éƒ¨åˆ†é—®é¢˜éœ€è¦äººå·¥ä»‹å…¥
- éœ€è¦è®°ä½å¯¹è¯ä¸Šä¸‹æ–‡

**å®æ–½æ­¥éª¤**ï¼š

```python
from langchain.agents import Tool, AgentExecutor, create_openai_functions_agent
from langchain.prompts import ChatPromptTemplate, MessagesPlaceholder
from langchain.memory import ConversationBufferMemory
from langchain.tools import StructuredTool
from pydantic import BaseModel, Field

# å®šä¹‰å·¥å…·çš„è¾“å…¥æ¨¡å‹
class SearchInput(BaseModel):
    query: str = Field(description="æœç´¢æŸ¥è¯¢")

def search_knowledgebase(query: str) -> str:
    """æœç´¢äº§å“çŸ¥è¯†åº“"""
    # å®ç°çŸ¥è¯†åº“æœç´¢é€»è¾‘
    return "æœç´¢ç»“æœ"

def escalate_to_human(issue: str) -> str:
    """è½¬æ¥åˆ°äººå·¥å®¢æœ"""
    # å®ç°äººå·¥è½¬æ¥é€»è¾‘
    return f"å·²è½¬æ¥åˆ°äººå·¥å®¢æœï¼š{issue}"

tools = [
    StructuredTool.from_function(
        func=search_knowledgebase,
        name="SearchKB",
        description="æœç´¢äº§å“çŸ¥è¯†åº“ï¼Œå›ç­”å¸¸è§é—®é¢˜",
        args_schema=SearchInput
    ),
    Tool(
        name="Escalate",
        func=escalate_to_human,
        description="å°†å¤æ‚é—®é¢˜è½¬æ¥åˆ°äººå·¥å®¢æœ"
    )
]

# åˆ›å»ºæç¤ºæ¨¡æ¿
prompt = ChatPromptTemplate.from_messages([
    ("system", """ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIå®¢æœåŠ©æ‰‹ã€‚
     ä½¿ç”¨æä¾›çš„å·¥å…·å›ç­”ç”¨æˆ·é—®é¢˜ã€‚
     å¦‚æœé—®é¢˜å¤æ‚æˆ–æ¶‰åŠæ•æ„Ÿä¿¡æ¯ï¼Œä½¿ç”¨ Escalate å·¥å…·è½¬æ¥äººå·¥å®¢æœã€‚
     """),
    MessagesPlaceholder(variable_name="chat_history"),
    ("human", "{input}"),
    MessagesPlaceholder(variable_name="agent_scratchpad")
])

# åˆ›å»ºæ™ºèƒ½ä½“
llm = ChatOpenAI(model="gpt-4", temperature=0)
agent = create_openai_functions_agent(llm, tools, prompt)

memory = ConversationBufferMemory(
    memory_key="chat_history",
    return_messages=True,
    max_token_limit=2000
)

agent_executor = AgentExecutor(
    agent=agent,
    tools=tools,
    memory=memory,
    verbose=True,
    handle_parsing_errors=True,
    max_iterations=5
)
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```python
# ç®€å•é—®ç­”
result = agent_executor.invoke({
    "input": "å¦‚ä½•é‡ç½®å¯†ç ï¼Ÿ"
})

# å¤æ‚é—®é¢˜è½¬æ¥
result = agent_executor.invoke({
    "input": "æˆ‘çš„è´¦æˆ·è¢«é”å®šäº†ï¼Œéœ€è¦ç´§æ€¥å¤„ç†"
})
```

---

### åœºæ™¯ 3ï¼šå¤šæ­¥éª¤å·¥ä½œæµè‡ªåŠ¨åŒ–

**é€‚ç”¨æƒ…å†µ**ï¼š
- éœ€è¦å¤šæ­¥éª¤å¤„ç†ä»»åŠ¡
- æ¯ä¸ªæ­¥éª¤ä¾èµ–å‰ä¸€æ­¥çš„è¾“å‡º
- éœ€è¦é”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶

**å®æ–½æ­¥éª¤**ï¼š

```python
from langchain.chains import SequentialChain
from langchain.prompts import PromptTemplate

# æ­¥éª¤ 1ï¼šç”Ÿæˆå¤§çº²
outline_prompt = PromptTemplate(
    input_variables=["topic"],
    template="ä¸ºä»¥ä¸‹ä¸»é¢˜ç”Ÿæˆä¸€ä¸ªè¯¦ç»†çš„å¤§çº²ï¼š{topic}"
)

outline_chain = LLMChain(
    llm=llm,
    prompt=outline_prompt,
    output_key="outline"
)

# æ­¥éª¤ 2ï¼šæ ¹æ®å¤§çº²ç”Ÿæˆå†…å®¹
content_prompt = PromptTemplate(
    input_variables=["outline"],
    template="æ ¹æ®ä»¥ä¸‹å¤§çº²å†™ä¸€ç¯‡å®Œæ•´çš„æ–‡ç« ï¼š\n{outline}"
)

content_chain = LLMChain(
    llm=llm,
    prompt=content_prompt,
    output_key="content"
)

# æ­¥éª¤ 3ï¼šç”Ÿæˆæ‘˜è¦
summary_prompt = PromptTemplate(
    input_variables=["content"],
    template="ä¸ºä»¥ä¸‹æ–‡ç« ç”Ÿæˆä¸€ä¸ª100å­—çš„æ‘˜è¦ï¼š\n{content}"
)

summary_chain = LLMChain(
    llm=llm,
    prompt=summary_prompt,
    output_key="summary"
)

# ç»„åˆæˆé¡ºåºé“¾
overall_chain = SequentialChain(
    chains=[outline_chain, content_chain, summary_chain],
    input_variables=["topic"],
    output_variables=["outline", "content", "summary"],
    verbose=True
)

# è¿è¡Œ
result = overall_chain("AI åœ¨æ•™è‚²ä¸­çš„åº”ç”¨")
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### å¸¸è§é™·é˜±

1. **æç¤ºè¯æ³„éœ²**
   - é—®é¢˜ï¼šå°†æ•æ„Ÿä¿¡æ¯æ”¾å…¥æç¤ºè¯
   - è§£å†³ï¼šä½¿ç”¨åŠ å¯†ã€å®¡è®¡æ—¥å¿—

2. **æˆæœ¬å¤±æ§**
   - é—®é¢˜ï¼šé¢‘ç¹è°ƒç”¨ LLM API å¯¼è‡´é«˜é¢è´¹ç”¨
   - è§£å†³ï¼š
     - ä½¿ç”¨ç¼“å­˜
     - é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼ˆGPT-3.5 vs GPT-4ï¼‰
     - è®¾ç½®é¢„ç®—å‘Šè­¦

3. **å»¶è¿Ÿé—®é¢˜**
   - é—®é¢˜ï¼šå¤æ‚é“¾å¯¼è‡´å“åº”æ…¢
   - è§£å†³ï¼š
     - ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹
     - å¹¶è¡Œå¤„ç†ç‹¬ç«‹ä»»åŠ¡
     - å¼‚æ­¥æ‰§è¡Œ

4. **å¹»è§‰é—®é¢˜**
   - é—®é¢˜ï¼šLLM ç”Ÿæˆä¸å‡†ç¡®çš„ä¿¡æ¯
   - è§£å†³ï¼š
     - ä½¿ç”¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰
     - é™åˆ¶æ¨¡å‹çš„çŸ¥è¯†èŒƒå›´
     - æ·»åŠ äº‹å®æ ¸æŸ¥æ­¥éª¤

---

## ğŸ”„ æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”

| æ¡†æ¶ | ä¼˜åŠ¿ | åŠ£åŠ¿ | æ¨èåœºæ™¯ |
|------|------|------|----------|
| **LangChain** | ç”Ÿæ€å®Œæ•´ã€æ–‡æ¡£ä¸°å¯Œã€ç¤¾åŒºæ´»è·ƒ | å­¦ä¹ æ›²çº¿é™¡å³­ã€æ€§èƒ½æœ‰å¾…ä¼˜åŒ– | å¤æ‚ AI åº”ç”¨ã€å¿«é€ŸåŸå‹ |
| [LlamaIndex](https://github.com/run-llama/llama_index) | ä¸“æ³¨äº RAGã€æ€§èƒ½å¥½ã€ç´¢å¼•å¼ºå¤§ | ç”Ÿæ€ç›¸å¯¹è¾ƒå°ã€çµæ´»æ€§è¾ƒä½ | æ•°æ®å¯†é›†å‹åº”ç”¨ã€ä¼ä¸šæœç´¢ |
| [Haystack](https://github.com/deepset-ai/haystack) | ä¼ä¸šçº§ã€æ–‡æ¡£å¥½ã€ç”Ÿäº§å°±ç»ª | ç¤¾åŒºè¾ƒå°ã€æ›´æ–°è¾ƒæ…¢ | ä¼ä¸šçº§éƒ¨ç½²ã€NLP åº”ç”¨ |
| [Semantic Kernel](https://github.com/microsoft/semantic-kernel) | Microsoft æ”¯æŒã€ä¼ä¸šå‹å¥½ | åŠŸèƒ½ç›¸å¯¹æ–°ã€ç¤¾åŒºå° | Microsoft ç”Ÿæ€é›†æˆ |

---

## ğŸ“š å­¦ä¹ èµ„æº

### å®˜æ–¹èµ„æº

- **æ–‡æ¡£**: https://python.langchain.com/
- **GitHub**: https://github.com/langchain-ai/langchain
- **Discord**: https://discord.gg/6ADMQjjRK5

### æ¨èæ•™ç¨‹

1. **[LangChain å¿«é€Ÿå…¥é—¨](https://python.langchain.com/docs/get_started/introduction)**
2. **[RAG åº”ç”¨å¼€å‘æŒ‡å—](https://python.langchain.com/docs/use_cases/question_answering)**
3. **[Agent å¼€å‘æ•™ç¨‹](https://python.langchain.com/docs/modules/agents/)**

### ç¤ºä¾‹é¡¹ç›®

- **GitHub Awesome LangChain**: https://github.com/sugarforever/LangChain-Tutorials
- **LangChain Cookbook**: https://github.com/gkamradt/langchain-tutorials

---

## ğŸ’¡ ä¸“å®¶å»ºè®®

### é€‚åˆäººç¾¤

âœ… **æ¨èä½¿ç”¨**ï¼š
- éœ€è¦å¿«é€Ÿæ„å»º AI åŸå‹
- å¼€å‘å¤æ‚çš„ AI åº”ç”¨
- éœ€è¦ä¸°å¯Œçš„é›†æˆæ”¯æŒ
- ä¼ä¸šçº§å¼€å‘éœ€æ±‚

âŒ **ä¸æ¨èä½¿ç”¨**ï¼š
- ç®€å•çš„ LLM API è°ƒç”¨ï¼ˆç›´æ¥ç”¨ API æ›´ç®€å•ï¼‰
- æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯
- é¢„ç®—éå¸¸æœ‰é™ï¼ˆè€ƒè™‘å¼€æºæ›¿ä»£ï¼‰

### ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•

- [ ] å®æ–½é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- [ ] æ·»åŠ æ—¥å¿—å’Œç›‘æ§
- [ ] è®¾ç½® API è°ƒç”¨é™åˆ¶å’Œé¢„ç®—å‘Šè­¦
- [ ] ä½¿ç”¨ç¼“å­˜å‡å°‘ API è°ƒç”¨
- [ ] å®æ–½å®‰å…¨æªæ–½ï¼ˆæ•æ„Ÿä¿¡æ¯å¤„ç†ï¼‰
- [ ] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–
- [ ] æ–‡æ¡£å’Œä»£ç æ³¨é‡Š
- [ ] å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

---

## ğŸ“Š é¡¹ç›®å¡ç‰‡

| å±æ€§ | å€¼ |
|------|-----|
| å¼€å‘è¯­è¨€ | Python, TypeScript |
| è®¸å¯è¯ | MIT |
| æ´»è·ƒåº¦ | â­â­â­â­â­ (éå¸¸æ´»è·ƒ) |
| å­¦ä¹ æ›²çº¿ | â­â­â­â­ (è¾ƒé™¡) |
| æ–‡æ¡£è´¨é‡ | â­â­â­â­â­ (ä¼˜ç§€) |
| ç”Ÿäº§å°±ç»ª | â­â­â­â­ (é€‚åˆç”Ÿäº§) |
| ç¤¾åŒºæ”¯æŒ | â­â­â­â­â­ (å¼ºå¤§) |

---

**æœ€åæ›´æ–°**: 2026-02-11
**ç»´æŠ¤è€…**: OpenClaw AI Agent
**æ¨èæŒ‡æ•°**: â˜…â˜…â˜…â˜…â˜… (å¼ºçƒˆæ¨è)
